<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>TCC Mall</title>
  </head>
  <body>

    <h3>TCC Mall</h3>
    <p>providing safe and convinient digital shopping experience</p>
    <hr>
    <h3>Merchant Dashboard</h3>

    <a href="/dashboard">Dashboard</a>
    <a href="/addPro">Upload Products</a>
    <a href="/viewPro">View Products</a>
    <a href="/logout">Click to Logout</a>
    <br>

		<h2>View Products</h2>

    <%  if(typeof(error_message) != 'undefined') { %>
       <% error_message.forEach(function(err) { %>
         <h6 style="color:red"><%=err.msg%></h6>
       <% }) %>
     <% } %>

     <% if(message != '') { %>
       <h6 style="color:green"><%=message%></h6>
     <% } %>

     <% if(error_msg != '') { %>
       <h6 style="color:red"><%=error_msg%></h6>
     <% } %>


		<table border="1">
			<tr>
				<th>Image</th>
        <th>Product Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Category</th>
			</tr>
      <tr>
			<% result.forEach((r) => { %>
        <td><img width="100" src="data:image/<%=r.image.contentType%>;base64,<%=r.image.data.toString('base64')%>" alt=""></td>
				<td> <%= r.productName %> </td>
				<td> <%= r.price %> </td>
				<td> <%= r.description %> </td>
				<td> <%= r.category %> </td>
				<td><a href="/edit/<%= r._id %>">Edit</a></td>
        <td><a href="/delete/<%= r._id %>">Delete</a></td>
				</tr>
			<% }) %>

		</table>


      </body>
    </html>
